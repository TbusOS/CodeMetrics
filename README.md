# ðŸ“Š CodeMetrics

ä¸€ä¸ªåŠŸèƒ½ä¸°å¯Œçš„ä»£ç åº¦é‡åˆ†æžå·¥å…·ï¼Œç»“åˆäº† clocã€tokeiã€scc ç­‰å·¥å…·çš„ä¼˜ç‚¹ã€‚

[![Python](https://img.shields.io/badge/Python-3.6+-blue.svg)](https://www.python.org/)
[![License](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Version](https://img.shields.io/badge/Version-1.1.0-orange.svg)]()

## âœ¨ ç‰¹æ€§

- ðŸŒ³ **ç›®å½•æ ‘å±•ç¤º** - ç›´è§‚çš„æ ‘å½¢ç»“æž„æ˜¾ç¤º
- ðŸ“Š **è¯¦ç»†ç»Ÿè®¡** - ä»£ç è¡Œ/æ³¨é‡Šè¡Œ/ç©ºè¡Œåˆ†ç¦»ç»Ÿè®¡
- ðŸŒ **å¤šè¯­è¨€æ”¯æŒ** - æ”¯æŒ 50+ ç¼–ç¨‹è¯­è¨€
- ðŸ’° **COCOMO ä¼°ç®—** - å¼€å‘æˆæœ¬ã€äººæœˆã€å·¥æœŸä¼°ç®—
- ðŸ¥ **å¥åº·åº¦åˆ†æž** - æ³¨é‡ŠçŽ‡ã€å¤§æ–‡ä»¶è­¦å‘Šç­‰
- ðŸ“ˆ **Top N åˆ†æž** - æœ€å¤§æ–‡ä»¶ã€ä»£ç æœ€å¤šæ–‡ä»¶æŽ’è¡Œ
- ðŸŽ¨ **å¤šè¾“å‡ºæ ¼å¼** - Terminal/JSON/Markdown/HTML
- ðŸ“ **è‡ªåŠ¨ä¿å­˜æŠ¥å‘Š** - ä¸€é”®ç”Ÿæˆå¤šæ ¼å¼æŠ¥å‘Š
- âš™ï¸ **å…¨å±€é…ç½®æ–‡ä»¶** - è‡ªå®šä¹‰æŽ’é™¤è§„åˆ™
- ðŸš€ **é›¶ä¾èµ–** - çº¯ Python æ ‡å‡†åº“å®žçŽ°

## ðŸ“¦ å®‰è£…

```bash
# å…‹éš†ä»“åº“
git clone https://github.com/yourusername/CodeMetrics.git
cd CodeMetrics

# ä¸€é”®å®‰è£…
./install.sh
```

å®‰è£…è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æŸ¥ Python ç‰ˆæœ¬ (éœ€è¦ >= 3.6)
- âœ… è®¾ç½®æ‰§è¡Œæƒé™
- âœ… åˆ›å»ºç¬¦å·é“¾æŽ¥åˆ° `~/.local/bin/codemetrics`
- âœ… æ£€æŸ¥å¹¶é…ç½® PATH

**å¸è½½ï¼š**
```bash
./uninstall.sh
```

## ðŸš€ å¿«é€Ÿå¼€å§‹

```bash
# åˆ†æžé©±åŠ¨ä»£ç  (åµŒå…¥å¼é¡¹ç›®)
python codemetrics.py /path/to/driver -p embedded

# åˆ†æž Web é¡¹ç›® (ä¸­ç­‰å¤æ‚åº¦)
python codemetrics.py /path/to/webapp -p semi-detached

# åˆ†æžå°å·¥å…·è„šæœ¬ (ç®€å•é¡¹ç›®)
python codemetrics.py /path/to/scripts -p organic
```

**é»˜è®¤è¾“å‡ºåŒ…å«ï¼š**
- ðŸ“‚ ç›®å½•æ ‘ç»“æž„
- ðŸ“Š è¯­è¨€ç»Ÿè®¡è¡¨
- ðŸ’° COCOMO æˆæœ¬ä¼°ç®—
- ðŸ¥ ä»£ç å¥åº·åº¦åˆ†æž
- ðŸ“ˆ Top 10 æœ€å¤§æ–‡ä»¶

## ðŸ“– ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬åˆ†æž
```bash
codemetrics /path/to/project -p embedded
```

### ä¿å­˜æŠ¥å‘Š
```bash
# ä¿å­˜ JSON/Markdown/HTML æŠ¥å‘Šåˆ°å·¥å…·ç›®å½•ä¸‹çš„ output æ–‡ä»¶å¤¹
codemetrics /path/to/project -p embedded -s

# æŠ¥å‘Šä½ç½®: codemetrics/output/
#   - projectname_YYYYMMDD_HHMMSS.json
#   - projectname_YYYYMMDD_HHMMSS.md
#   - projectname_YYYYMMDD_HHMMSS.html
#   - latest.json / latest.md / latest.html
```

### æ˜¾ç¤º Top 20 æ–‡ä»¶
```bash
codemetrics /path/to/project -p embedded -n 20
```

### é¢å¤–æŽ’é™¤ç›®å½•
```bash
codemetrics /path/to/project -p embedded -e "test/*,docs/*"
```

## ðŸ“‹ å‘½ä»¤è¡Œå‚æ•°

è¿è¡Œ `codemetrics` (ä¸å¸¦ä»»ä½•å‚æ•°) å¯æŸ¥çœ‹å®Œæ•´å¸®åŠ©ä¿¡æ¯ã€‚

| å‚æ•° | ç®€å†™ | æè¿° |
|------|------|------|
| `path` | - | è¦åˆ†æžçš„ç›®å½•è·¯å¾„ (å¿…éœ€) |
| `--project-type` | `-p` | **å¿…éœ€** COCOMO é¡¹ç›®ç±»åž‹: organic/semi-detached/embedded |
| `--save` | `-s` | ä¿å­˜æŠ¥å‘Šåˆ°è¾“å‡ºç›®å½• (JSON/Markdown/HTML) |
| `--top N` | `-n N` | Top N æ–‡ä»¶æ•°é‡ (é»˜è®¤: 10) |
| `--exclude` | `-e` | é¢å¤–æŽ’é™¤çš„æ¨¡å¼ (é€—å·åˆ†éš”) |
| `--no-color` | - | ç¦ç”¨é¢œè‰²è¾“å‡º |
| `--version` | `-v` | æ˜¾ç¤ºç‰ˆæœ¬å· |

### é¡¹ç›®ç±»åž‹è¯´æ˜Ž

| ç±»åž‹ | æè¿° | é€‚ç”¨åœºæ™¯ |
|------|------|----------|
| **organic** | ç®€å•é¡¹ç›® | å°å›¢é˜Ÿã€ç†Ÿæ‚‰çš„æŠ€æœ¯æ ˆ |
| **semi-detached** | ä¸­ç­‰é¡¹ç›® | ä¸­åž‹å›¢é˜Ÿã€æ··åˆç»éªŒ |
| **embedded** | å¤æ‚é¡¹ç›® | åµŒå…¥å¼ã€é©±åŠ¨ã€å®žæ—¶ç³»ç»Ÿã€ç¡¬ä»¶ç›¸å…³ |

## âš™ï¸ é…ç½®æ–‡ä»¶

å…¨å±€é…ç½®æ–‡ä»¶ä½äºŽå·¥å…·ç›®å½•ä¸‹ï¼š`codemetrics/config.json`

```json
{
  "name": "CodeMetrics å…¨å±€é»˜è®¤é…ç½®",
  "version": "1.0",
  "exclude": {
    "patterns": ["*.md", "*.json", "*.html", "*.txt", "*.o", "*.ko", "*.d"],
    "dirs": [".git", "node_modules", "__pycache__", "build"]
  },
  "cocomo": {
    "cost_per_month_usd": 5000,
    "cost_per_month_cny": 30000
  },
  "health": {
    "comment_ratio_min": 0.15,
    "comment_ratio_max": 0.30,
    "large_file_threshold": 800
  }
}
```

### é…ç½®è¯´æ˜Ž

| é…ç½®é¡¹ | è¯´æ˜Ž |
|--------|------|
| `exclude.patterns` | è¦æŽ’é™¤çš„æ–‡ä»¶æ¨¡å¼ (glob) |
| `exclude.dirs` | è¦æŽ’é™¤çš„ç›®å½• |
| `cocomo.cost_per_month_*` | äººæœˆæˆæœ¬ (å½±å“æˆæœ¬ä¼°ç®—) |
| `health.*` | å¥åº·åº¦æŒ‡æ ‡é˜ˆå€¼ |

## ðŸ“Š è¾“å‡ºç¤ºä¾‹

### è¯­è¨€ç»Ÿè®¡è¡¨
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                              ðŸ“Š è¯­è¨€ç»Ÿè®¡                                      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•¦â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ è¯­è¨€           â•‘ æ–‡ä»¶  â•‘ ä»£ç è¡Œ  â•‘ æ³¨é‡Šè¡Œ  â•‘ ç©ºè¡Œ     â•‘ æ€»è¡Œæ•°   â•‘ å¤§å°      â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ C              â•‘    18 â•‘  12,456 â•‘   2,134 â•‘    1,023 â•‘   15,613 â•‘   623 KB  â•‘
â•‘ C/C++ Header   â•‘    15 â•‘   2,890 â•‘     567 â•‘      234 â•‘    3,691 â•‘   156 KB  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•¬â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ æ€»è®¡           â•‘    33 â•‘  15,346 â•‘   2,701 â•‘    1,257 â•‘   19,304 â•‘   779 KB  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•©â•â•â•â•â•â•â•â•â•â•â•â•
```

### COCOMO æˆæœ¬ä¼°ç®—
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                           ðŸ’° å¼€å‘æˆæœ¬ä¼°ç®— (COCOMO)                            â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ä»£ç è§„æ¨¡: 15.35 KLOC (15,346 è¡Œä»£ç )                                         â•‘
â•‘ é¡¹ç›®ç±»åž‹: åµŒå…¥å¼ (embedded)                                                   â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ðŸ“… é¢„ä¼°å·¥æœŸ:     8.2 ä¸ªæœˆ                                                     â•‘
â•‘ ðŸ‘¥ å»ºè®®å›¢é˜Ÿ:     2.4 äºº                                                       â•‘
â•‘ â±ï¸  æ€»äººæœˆæ•°:    19.8 äººæœˆ                                                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘ ðŸ’µ æˆæœ¬ä¼°ç®— (USD): $99,000                                                    â•‘
â•‘ ðŸ’´ æˆæœ¬ä¼°ç®— (CNY): Â¥594,000                                                   â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ðŸ§® COCOMO æ¨¡åž‹è¯´æ˜Ž

COCOMO (Constructive Cost Model) æ˜¯ Barry Boehm æå‡ºçš„è½¯ä»¶æˆæœ¬ä¼°ç®—æ¨¡åž‹ã€‚

### è®¡ç®—å…¬å¼

```
äººæœˆ (PM) = a Ã— (KLOC)^b
å·¥æœŸ (æœˆ) = c Ã— (PM)^d
å›¢é˜Ÿè§„æ¨¡ = PM / å·¥æœŸ
```

## ðŸ¥ å¥åº·åº¦æŒ‡æ ‡

| æŒ‡æ ‡ | å»ºè®®å€¼ | è¯´æ˜Ž |
|------|--------|------|
| æ³¨é‡ŠçŽ‡ | 15-30% | ä»£ç å¯ç»´æŠ¤æ€§ |
| å¹³å‡æ–‡ä»¶è¡Œæ•° | 100-500 | æ¨¡å—åŒ–ç¨‹åº¦ |
| å¤§æ–‡ä»¶ (>800è¡Œ) | 0 | å»ºè®®æ‹†åˆ† |
| ä½Žæ³¨é‡Šæ–‡ä»¶ (<5%) | 0 | å»ºè®®æ·»åŠ æ³¨é‡Š |

## ðŸŒ æ”¯æŒçš„è¯­è¨€

C, C++, Python, Java, JavaScript, TypeScript, Go, Rust, Ruby, PHP, Swift, Kotlin, Scala, C#, Shell, Perl, Lua, R, SQL, HTML, CSS, SCSS, Vue, React, Markdown, YAML, JSON, XML, Makefile, Dockerfile, ç­‰ 50+ è¯­è¨€ã€‚

## ðŸ“„ è®¸å¯è¯

MIT License

## ðŸ¤ è´¡çŒ®

æ¬¢è¿Žæäº¤ Issue å’Œ Pull Request!

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æŽ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. åˆ›å»º Pull Request

## ðŸ“® è”ç³»

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issueã€‚
